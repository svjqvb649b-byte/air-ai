<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>Air & Noel</title>
<style>
  body {
    background:#0b1020;
    color:#e6e9ff;
    font-family:sans-serif;
    margin:0;
  }
  #header {
    padding:10px;
    text-align:center;
  }
  #notifyBtn {
    background:#2aa8ff;
    color:white;
    border:none;
    border-radius:20px;
    padding:8px 16px;
  }
  #chat {
    padding:10px;
    height:70vh;
    overflow-y:auto;
  }
  .air { color:#ffffff; }
  .noel { color:#b8c7ff; }
  .you { color:#4fd1ff; }
  #inputArea {
    display:flex;
    padding:10px;
  }
  input {
    flex:1;
    padding:10px;
    border-radius:20px;
    border:none;
  }
  button {
    margin-left:8px;
    border-radius:20px;
    border:none;
    padding:10px 16px;
  }
</style>
</head>

<body>

<div id="header">
  <button id="notifyBtn">ğŸ”• é€šçŸ¥ï¼šOFF</button>
</div>

<div id="chat"></div>

<div id="inputArea">
  <input id="text" placeholder="ã“ã“ã«è©±ã—ã‹ã‘ã¦" />
  <button onclick="send()">é€ã‚‹</button>
</div>

<script>
/* ========= çŠ¶æ…‹ ========= */
let notifyEnabled = false;

/* ========= æ™‚é–“å‰² ========= */
const timetable = {
  "æœˆæ›œæ—¥": ["æ•°å­¦I","è‹±èªã‚³ãƒŸãƒ¥I","ä½“è‚²","è¨€èªæ–‡åŒ–","å®¶åº­åŸºç¤","éŸ³æ¥½I"],
  "ç«æ›œæ—¥": ["è‹±èªã‚³ãƒŸãƒ¥I","ç¾ä»£ã®å›½èª","æ•°å­¦I","ä¿å¥","å…¬å…±","ç·åˆ"],
  "æ°´æ›œæ—¥": ["è‹±èªã‚³ãƒŸãƒ¥I","ç§‘å­¦ã¨äººé–“ç”Ÿæ´»","è¨€èªæ–‡åŒ–","æ­´å²ç·åˆ","ä½“è‚²","LHR"],
  "æœ¨æ›œæ—¥": ["éŸ³æ¥½I","ç§‘å­¦ã¨äººé–“ç”Ÿæ´»","æƒ…å ±I","å®¶åº­åŸºç¤","ä½“è‚²","æ•°å­¦I"],
  "é‡‘æ›œæ—¥": ["å…¬å…±","æ•°å­¦I","è‹±èªã‚³ãƒŸãƒ¥I","æ­´å²ç·åˆ","ç¾ä»£ã®å›½èª","æƒ…å ±I"]
};

/* ========= å®šå‹æ–‡ ========= */
const AIR_GREET = ["â€¦â€¦èã„ã¦ã‚‹ã€‚","â€¦â€¦ã“ã“ã«ã„ã‚‹ã€‚"];
const NOEL_GREET = ["ã„ã¤ã§ã‚‚è©±ã—ã‹ã‘ã¦ã€‚","ã†ã‚“ã€‚"];

const AIR_CALM = ["â€¦â€¦è½ã¡ç€ã„ã¦ã‚‹ã€‚","â€¦â€¦å¤§ä¸ˆå¤«ãã†ã€‚"];

/* ========= UI ========= */
function add(name,text){
  const div=document.createElement("div");
  div.className = name==="Air"?"air":name==="Noel"?"noel":"you";
  div.textContent = `${name} : ${text}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

/* ========= åˆ¤å®š ========= */
const isGreeting = t => /ãŠã¯ã‚ˆã†|ã“ã‚“ã«ã¡ã¯|ã“ã‚“ã°ã‚“ã¯|ãŠã‚„ã™ã¿/.test(t);
const isSchedule = t => /äºˆå®š|æ™‚é–“å‰²|ä½•é™|æˆæ¥­/.test(t);
const isTwoTalk = t => /2äºº|ãµãŸã‚Š/.test(t);

/* ========= æ›œæ—¥æŠ½å‡º ========= */
function getDay(text){
  if(/æ˜æ—¥/.test(text)){
    const d=["æ—¥æ›œæ—¥","æœˆæ›œæ—¥","ç«æ›œæ—¥","æ°´æ›œæ—¥","æœ¨æ›œæ—¥","é‡‘æ›œæ—¥","åœŸæ›œæ—¥"];
    return d[new Date().getDay()+1] || "æœˆæ›œæ—¥";
  }
  const days=["æœˆæ›œæ—¥","ç«æ›œæ—¥","æ°´æ›œæ—¥","æœ¨æ›œæ—¥","é‡‘æ›œæ—¥"];
  return days.find(d=>text.includes(d)) || "æœˆæ›œæ—¥";
}

/* ========= é€ä¿¡ ========= */
function send(){
  const t=text.value.trim();
  if(!t) return;
  add("å›",t);
  text.value="";

  // â˜… ã¾ãšåå¿œï¼ˆæ¶ˆã•ãªã„ï¼‰
  add("Air","â€¦â€¦èã„ã¦ã‚‹ã€‚");

  // æŒ¨æ‹¶
  if(isGreeting(t)){
    add("Air",AIR_GREET[Math.floor(Math.random()*AIR_GREET.length)]);
    add("Noel",NOEL_GREET[Math.floor(Math.random()*NOEL_GREET.length)]);
    return;
  }

  // äºˆå®š
  if(isSchedule(t)){
    const day=getDay(t);
    add("Noel",`${day}ã®äºˆå®šã ã‚ˆã€‚`);
    timetable[day].forEach((s,i)=>{
      add("Air",`${i+1}é™ç›®ï¼š${s}`);
    });
    return;
  }

  // 2äººä¼šè©±
  if(isTwoTalk(t)){
    add("Air","â€¦â€¦å°‘ã—è©±ãã†ã€‚");
    add("Noel","ã†ã‚“ã€‚");
    add("Air",AIR_CALM[Math.floor(Math.random()*AIR_CALM.length)]);
    return;
  }

  // é€šå¸¸
  add("Noel","ãã®ã¾ã¾ã§ã„ã„ã€‚");
}

/* ========= é€šçŸ¥ ========= */
notifyBtn.onclick=()=>{
  notifyEnabled=!notifyEnabled;
  notifyBtn.textContent = notifyEnabled?"ğŸ”” é€šçŸ¥ï¼šON":"ğŸ”• é€šçŸ¥ï¼šOFF";
};
</script>

</body>
</html>
